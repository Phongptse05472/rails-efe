<%= content_for :page_title, 'User home' %>
<div #app1 class="right">
  <h1>Your Course</h1>
  <div id="exampleSlider">
    <div id="app1" class="MS-content">
      <% @my_courses.each do |my_courses| %>
        <div id="item" class="item">
          <div class="thumbnai">
            <a href="watch.html"><%= image_tag('java_script.jpg') %></a>
          </div>
          <div class="author">
            <div class="icon">
              <%= image_tag('2.jpg') %>
            </div>
            <div class="title">
              <div class="name">
                <%= link_to my_courses.name, course_path(my_courses.id) %>
              </div>
              <p class="status">Progress (<%= my_courses.progression %>%)</p>
              <progress max="100" value="<%= my_courses.progression %>"></progress>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="MS-controls">
      <button class="MS-left"><i class="fa fa-chevron-left"></i></button>
      <button class="MS-right"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
    </div>
  </div>
  <h1>Topic</h1>
  <div id="topic" class="topic">
    <% @topic.each do |topic| %>
      <%= link_to topic.name, topic_path(topic.id) %>
    <% end %>
  </div>

  <h1>Recommend for you</h1>
  List course here

  <h1>Hot course</h1>
  <div id="exampleSlider1">
    <div class="MS-content">
      <% @hot_course.each do |course| %>
        <div id="item" class="item">
          <div class="thumbnai">
            <% if course.image.attached? %>
              <%= image_tag(course.image) %>
            <% else %>
              <%= image_tag('course_1.jpg') %>
            <% end %>

            <% @customer_course = CustomerCourse.where("customer_id = ? AND course_id = ?", current_user.id, course.id) %>
            <% if @customer_course.exists? %>
              <% if @customer_course.first.is_save == true %>
                <%= link_to update_archived_path(course.id), method: :post, remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark" aria-hidden="true"></i>
                <% end %>
              <% else %>
                <%= link_to update_archived_path(course.id), method: :post , remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
                <% end %>
              <% end %>
            <% else %>
              <%= link_to add_to_archived_path(course.id), method: :post  do %>
                <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
              <% end %>
            <% end %>


          </div>
          <div class="author">
            <div class="icon">
              <%= image_tag("2.jpg", alt: "") %>
            </div>
            <div class="title">
              <div class="name">
                <%= link_to course.name, course_path(course.slug) %>
              </div>
              <p><%= course.author %></p>
              <div class="star">
                <span class="stars " data-rating="<%= course.rate %>" data-num-stars="5"></span>
              </div>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star-half-o checked"></span>
              <span class="fa fa-star-o checked"></span>
              <span>(<%= course.number_enrollment %> enroll)</span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="MS-controls">
      <button class="MS-left"><i class="fa fa-chevron-left"></i></button>
      <button class="MS-right"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
    </div>
  </div>
  <h1>Top course</h1>
  <div id="exampleSlider2">
    <div class="MS-content">
      <% @rate_course.each do |course| %>
        <div id="item" class="item">
          <div class="thumbnai">
            <% if course.image.attached? %>
              <%= image_tag(course.image) %>
            <% else %>
              <%= image_tag('course_1.jpg') %>
            <% end %>
            <% customer_course = CustomerCourse.where("customer_id = ? AND course_id = ?", current_user.id, course.id) %>
            <% if customer_course.exists? %>
              <% if customer_course.first.is_save == true %>
                <%= link_to update_archived_path(course.id), method: :post, remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark" aria-hidden="true"></i>
                <% end %>
              <% else %>
                <%= link_to update_archived_path(course.id), method: :post , remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
                <% end %>
              <% end %>
            <% else %>
              <%= link_to add_to_archived_path(course.id), method: :post  do %>
                <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
              <% end %>
            <% end %>

          </div>
          <div class="author">
            <div class="icon">
              <%= image_tag("2.jpg", alt: "") %>
            </div>
            <div class="title">
              <div class="name">
                <%= link_to course.name, course_path(course.slug) %>
              </div>
              <p><%= course.author %></p>
              <script>
                  $(function () {
                      $('.stars').stars();
                  });
              </script>
              <div class="star">
                <span class="stars " data-rating="<%= course.rate %>" data-num-stars="5"></span>
              </div>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star-half-o checked"></span>
              <span class="fa fa-star-o checked"></span>
              <span>(<%= course.number_enrollment %> enroll)</span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="MS-controls">
      <button class="MS-left"><i class="fa fa-chevron-left"></i></button>
      <button class="MS-right"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
    </div>
  </div>
  <h1>New course</h1>
  <div id="exampleSlider3">
    <div class="MS-content">
      <% @new_course.each do |course| %>
        <div id="item" class="item">
          <div class="thumbnai">
            <% if course.image.attached? %>
              <%= image_ta g(course.image) %>
            <% else %>
              <%= image_tag('course_1.jpg') %>
            <% end %>

            <% customer_course = CustomerCourse.where("customer_id = ? AND course_id = ?", current_user.id, course.id) %>
            <% if customer_course.exists? %>
              <% if customer_course.first.is_save == true %>
                <%= link_to update_archived_path(course.id), method: :post, remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark" aria-hidden="true"></i>
                <% end %>
              <% else %>
                <%= link_to update_archived_path(course.id), method: :post , remote: true do %>
                  <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
                <% end %>
              <% end %>
            <% else %>
              <%= link_to add_to_archived_path(course.id), method: :post  do %>
                <i onclick="bookmark(this,123)" class="fa fa-bookmark-o" aria-hidden="true"></i>
              <% end %>
            <% end %>

          </div>
          <div class="author">
            <div class="icon">
              <%= image_tag("2.jpg", alt: "") %>
            </div>
            <div class="title">
              <div class="name">
                <%= link_to course.name, course_path(course.slug) %>
              </div>
              <p><%= course.author %></p>
              <script>
                  $(function () {
                      $('.stars').stars();
                  });
              </script>
              <div class="star">
                <span class="stars " data-rating="<%= course.rate %>" data-num-stars="5"></span>
              </div>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star checked"></span>
              <span class="fa fa-star-half-o checked"></span>
              <span class="fa fa-star-o checked"></span>
              <span>(<%= course.number_enrollment %> enroll)</span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="MS-controls">
      <button class="MS-left"><i class="fa fa-chevron-left"></i></button>
      <button class="MS-right"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
    </div>
  </div>
  <h1>Top view article</h1>
  <div id="exampleSlider4">
    <div id="topView" class="MS-content">
      <% @top_view_article.each do |article| %>
        <div id="item" class="item">
          <div class="thumbnai">
            <%= image_tag('java.png') %>
            <i onclick="heart(this,123)" class="fa fa-heart-o" aria-hidden="true"></i>
          </div>
          <div class="author">
            <div class="icon">
              <%= image_tag("2.jpg", alt: "") %>
            </div>
            <div class="title">
              <div class="name">
                <%= article.title %>
              </div>
              <p><%= article.author %></p>
              <span><%= article.view_number %> view</span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="MS-controls">
      <button class="MS-left"><i class="fa fa-chevron-left"></i></button>
      <button class="MS-right"><i class="fa fa-chevron-right" aria-hidden="true"></i></button>
    </div>
  </div>
</div>
<script>
    function bookmark(bookmark, courseID) {
        var x = bookmark;
        if (x.className === "fa fa-bookmark") {
            x.className = "fa fa-bookmark-o";
        } else {
            x.className = "fa fa-bookmark";
        }
        var app1 = new Vue({
            el: '#app1',
            mounted: function () {
                axios.get('/archive_courses/', {
                    params: {
                        num: courseID
                    }
                }).catch(error => {
                    console.log(error);
                });
            }
        });
    }
    function heart(heart, courseID) {
        var x = heart;
        if (x.className === "fa fa-heart") {
            x.className = "fa fa-heart-o";
        } else {
            x.className = "fa fa-heart";
        }
        var app1 = new Vue({
            el: '#app1',
            mounted: function () {
                axios.get('/archive_courses/', {
                    params: {
                        num: courseID
                    }
                }).catch(error => {
                    console.log(error);
                });
            }
        });
    }
</script>

<script>
    window.addEventListener('click', function (e) {
        if (!document.getElementById('myBtn').contains(e.target)) {
            document.getElementById('notifications').style.display = "none"
        }
    });

    function myfunction() {
        if (document.getElementById('notifications').style.display == "none" ||
            document.getElementById('notifications').style.display == '') {
            document.getElementById('notifications').style.display = "block"
        } else {
            document.getElementById('notifications').style.display = "none"
        }
    }
</script>

<!--   Initialize element with Multislider-->
<script>
    $('#exampleSlider').multislider({
        interval: 100000,
        continuous: false
    });
    $('#exampleSlider1').multislider({
        interval: 100000,
        continuous: false

    });
    $('#exampleSlider2').multislider({
        interval: 100000,
        continuous: false

    });
    $('#exampleSlider3').multislider({
        interval: 100000,
        continuous: false

    });
    $('#exampleSlider4').multislider({
        interval: 100000,
        continuous: false

    });

</script>
